# プロダクト要求仕様書（PRD）

## 1. プロジェクト概要（Overview）

**プロダクト名：** BUD（バド）

**コンセプト：**

- BUD は「芽（bud）」を育てるという意味を込め、子どもの"英語の芽"を親子で育むアプリ
- buddy（仲間）のニュアンスも含み、親と子、チームが伴走して成長を応援する
- 正解はひとつじゃない。発音の"正しさ"よりも「伝わった喜び」と「勇気ある一歩」を祝う
- 同じ意図にいろんな言い方があることを提示し、子どもが自分の言葉で話す力を育む

## 2. 背景（Background）

- 小学生期に、実際の対面で外国人へ声をかける体験は希少で価値が高い
- 親が英語に苦手意識を持つと、背中を押せず行動が途切れやすい
- 挑戦が記録に残らず「やりっぱなし」になり、自信や学びに結びつきにくい
- 英語が得意でない親でも、子どもの挑戦を安全に後押しできる"伴走ツール"が必要
- 従来の「唯一の正解」や「発音の減点」に偏る学習は、話しかける勇気を削ぎがち
- 小学 1〜3 年生は英語へのアレルギーが少なく、対面で「伝わる楽しさ」を体験しやすい好機

## 3. 目的・ゴール（Goals / Objectives）

**目的：**

- 小学生が対面で安心して英語にチャレンジでき、親子で成功体験を記録・振り返り、次の一歩につながる状態をつくる
- 点取りや減点ではなく「伝わる経験の反復」と「勇気の可視化」を重視する

**KPI（MVP 段階）：**

- チャレンジ実行率（録音・保存回数／月）：開始 1 回 → 3 カ月後 2 回 → 6 カ月後 3 回
- 親の満足度・安心度（アンケート）：成長実感 85％以上／安心 90％以上／NPS 50 以上
- フィードバック閲覧率・振り返り実施率

## 4. 対象ユーザー（Target Users）

- **メインユーザー：** 小学 1〜3 年生の子どもと、その親（特に英語が得意でない保護者）
- **子ども：** 外国人に声をかける勇気がほしい、成功体験を残したい
- **親：** 安全に見守りたい、英語が苦手でも応援・称賛したい

## 5. スコープ（Scope）

**含まれる機能（MVP）：**

- 録音＋リアルタイム文字起こし（Web Speech API）
- AI フィードバック（褒める／別表現提案／励まし）
- 保護者のためのお助けフレーズ表示（録音前／録音中）
- 記録保存（文字起こし・感想）と履歴一覧

**含まれない（将来検討）：**

- 段階別チャレンジ提案（レベル設計）
- 世界地図・ピン機能
- 決済・プレミアム機能

## 6. ユーザーストーリー（User Stories）

- **親として：** 英語が苦手でもお助けフレーズと録音・文字起こしで子どもの挑戦を安心して支援したい
- **親として：** AI フィードバックを一緒に読んで具体的に褒め、次の一歩を促したい
- **親として：** 発音や文法の正解探しではなく、子どもの勇気と「伝わった事実」を具体的に称えたい
- **子どもとして：** Hello! と声をかけた体験を記録し、できたことを振り返って自信にしたい
- **子どもとして：** 言い方はいろいろあっていいことを知り、自分の言葉で話して通じた喜びを残したい

## 7. 画面設計（UI Design）

**主要画面フロー：**

- ホーム画面（チャレンジ開始／お助けフレーズ）→ 録音画面 → フィードバック画面 → 記録入力画面 → 履歴一覧／詳細画面

**画面設計図：**

![画面設計図](./docs/images/screen-design-v1.png)

## 8. 非機能要件（Non-functional Requirements）

- **パフォーマンス：** 録音開始〜文字起こし表示の体感遅延を最小化（目安 1 秒以内）
- **セキュリティ／プライバシー：** 原則テキストのみ保存。音声ファイルは保存しない。削除機能を提供
- **対応ブラウザ／OS：**
  - 推奨：Chrome / Edge（最新 2 バージョン、モバイル・デスクトップ）
  - 参考：iOS Safari（webkit 前提で簡易サポート）
  - 非対応：Firefox は機能縮退（録音のみ）を明記
- **同意：** 初回起動時に保護者同意（保存データ・利用目的・削除方法）

## 9. 技術要件（Tech Requirements）

**主要技術スタック：**

**フロントエンド：**

- Next.js (App Router) / TypeScript / React
- shadcn/ui (V0) / Tailwind CSS
- ESLint/Prettier (コード品質管理)
- Vitest/Playwright (テストフレームワーク)

**バックエンド：**

- Python / FastAPI (API フレームワーク)
- SQLAlchemy (ORM) / Alembic (データベースマイグレーション)
- Pydantic (データバリデーション)
- OpenAPI 3.0.3 (API 設計・Swagger UI)

**認証・決済：**

- Firebase Authentication (Google ログイン認証)
- Firebase Admin SDK (サーバーサイド認証)
- Stripe (決済処理)

**AI・音声処理：**

- Web Speech API (ブラウザ音声認識・文字起こし)
- MediaRecorder API (音声録音)
- OpenAI API (GPT-4 による学習フィードバック)

**DB・インフラ：**

- PostgreSQL (データベース)
- Docker (コンテナ化)
- Docker Compose (オーケストレーション・ローカル統一環境)

**開発環境・品質管理：**

- GitHub Actions (CI/CD)
- ruff/black (Python 静的解析・自動整形)
- husky + lint-staged (Git フック・コミット前チェック)
- pytest (バックエンドテスト)
- python-dotenv (環境変数管理)

**Git 運用・コード管理：**

- Feature ブランチ運用 (main/develop/feature)
- Conventional Commits (コミット管理)

**デプロイ・ホスティング：**

- Vercel (フロントエンド)
- Railway/Render/Fly.io (バックエンド検討中)

**詳細な技術仕様：**

- [フロントエンド技術詳細](./frontend/README.md)
- [バックエンド技術詳細](./backend/README.md)
- [API 設計書](./docs/api-specification.yaml)
- [DB 設計書](./docs/database-design.md)

## 10. マイルストーン（Milestones）

- **7/28** チーム発表・キックオフ（達成）
  - 課題定義・ペルソナ・利用シーンの議論、ソリューション案・技術選定開始
- **8/1〜8/3** 企画固め（達成）
  - ISSUE 整理、アプリ方針決定、技術スタック仮決め
- **8/4〜8/8** 環境構築（達成）
  - Next.js セットアップ、UI 基盤（shadcn/Tailwind）、リポジトリ運用、CI の土台
- **8/9〜8/18** MVP 実装（達成）
  - 録音 → 文字起こし →AI フィードバック → 記録保存の一連フロー
- **8/19〜8/24** 磨き込み（達成）
  - お助けフレーズ充実、振り返り UI 改善、軽微な不具合修正
- **8/25〜8/28** 発表準備（達成）
  - スライド・デモ作成、台本整備、最終動作確認
- **8/29** 発表会（達成）
- **8/30〜9/5** 提出最終版整備（進行中）
  - 発表フィードバック反映、バグ修正、ドキュメント・README・PRD 更新
- **9/6〜（任意）** 機能拡張・連携調査
  - 音声ベース評価 PoC、教育連携ヒアリング、課金モデル検討

## 11. リスクと対応（Risks & Mitigations）

- **使用頻度が低くなりがち**
  - 対応：振り返りの"ごほうび"（スタンプ）、次回の一言提案、軽い通知
- **ブラウザ依存（Web Speech API の非対応）**
  - 対応：縮退動作と案内、対応ブラウザ明記、録音のみ保存の代替導線
- **コスト（AI 利用）**
  - 対応：入力要約・レスポンス短文化・キャッシュで抑制
- **プライバシー・安全**
  - 対応：音声非保存・匿名化・保護者同意・アプリ内安全ガイド表示
